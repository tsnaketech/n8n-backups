{
    "createdAt": "2025-06-24T23:53:55.351Z",
    "updatedAt": "2025-08-16T22:28:46.000Z",
    "id": "cBpT07OPrRHZfQ7z",
    "name": "Test1",
    "active": false,
    "isArchived": false,
    "nodes": [
        {
            "parameters": {
                "filePath": "/data/input/interview.mp4"
            },
            "id": "84e83d88-729a-4d26-bddb-5a2bd9b8d34e",
            "name": "Read Video",
            "type": "n8n-nodes-base.readBinaryFile",
            "typeVersion": 1,
            "position": [
                832,
                96
            ]
        },
        {
            "parameters": {
                "command": "ffmpeg -i /data/input/interview.mp4 /data/frames/frame_%04d.png"
            },
            "id": "c982ed30-1cf8-4916-bff6-e51f99f8ab64",
            "name": "Extract Frames",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                1088,
                96
            ]
        },
        {
            "parameters": {
                "batchSize": 1,
                "options": {}
            },
            "id": "85bd3573-f3dc-491b-95d9-02ddb94e9a0d",
            "name": "Split Frames",
            "type": "n8n-nodes-base.splitInBatches",
            "typeVersion": 1,
            "position": [
                1344,
                96
            ]
        },
        {
            "parameters": {
                "authentication": "aws",
                "url": "https://rekognition.us-east-1.amazonaws.com",
                "jsonParameters": true,
                "options": {}
            },
            "id": "4c4e2670-3d5d-47fd-8990-5cccb604f285",
            "name": "AWS Rekognition IndexFaces",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 1,
            "position": [
                1584,
                96
            ]
        },
        {
            "parameters": {
                "fieldsToAggregate": {
                    "fieldToAggregate": [
                        {}
                    ]
                },
                "options": {}
            },
            "id": "2c01259e-820c-4b16-93e8-4f0ad6f70920",
            "name": "Aggregate Face IDs",
            "type": "n8n-nodes-base.aggregate",
            "typeVersion": 1,
            "position": [
                1840,
                96
            ]
        },
        {
            "parameters": {
                "authentication": "headerAuth",
                "url": "https://api.replicate.com/v1/predictions",
                "jsonParameters": true,
                "options": {}
            },
            "id": "8f6789d5-c2a7-40b1-9fef-698518c6936f",
            "name": "Generate Baby Face",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 1,
            "position": [
                2096,
                96
            ],
            "credentials": {
                "httpHeaderAuth": {
                    "id": "3sytPF58vLXwSQtC",
                    "name": "NocoDB"
                }
            }
        },
        {
            "parameters": {
                "command": "python3 /data/scripts/face_swap_aws.py /data/frames /data/baby_faces /data/aws_faces.json /data/frames_swapped"
            },
            "id": "53b876e9-8b72-4eae-8df8-128d4e3e186b",
            "name": "Apply Face Swap",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                2336,
                96
            ]
        },
        {
            "parameters": {
                "command": "ffmpeg -framerate 30 -i /data/frames_swapped/frame_%04d.png -i /data/input/interview.mp4 -c:v libx264 -pix_fmt yuv420p -map 0:v -map 1:a /data/output/final_babyface.mp4"
            },
            "id": "e931cda6-e866-4749-b2b3-110ab9ce8853",
            "name": "Rebuild Video",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                2592,
                96
            ]
        },
        {
            "parameters": {
                "options": {}
            },
            "id": "c81c2494-cde9-4355-9985-48df14ed26b6",
            "name": "Return File",
            "type": "n8n-nodes-base.moveBinaryData",
            "typeVersion": 1,
            "position": [
                2832,
                96
            ]
        },
        {
            "parameters": {
                "authentication": "aws",
                "url": "https://rekognition.us-east-1.amazonaws.com",
                "jsonParameters": true,
                "options": {}
            },
            "id": "d232f5d2-de60-410c-a6c8-2cec164c2e7d",
            "name": "AWS SearchFacesByImage",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 1,
            "position": [
                2304,
                304
            ]
        },
        {
            "parameters": {
                "command": "python3 /data/scripts/face_swap_aws_memory.py"
            },
            "id": "81420012-bb15-40c6-a879-d0f32260d774",
            "name": "Apply Face Swap Memory",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                2560,
                304
            ]
        },
        {
            "parameters": {
                "filePath": "/data/input/interview.mp4"
            },
            "id": "0aaa2f4a-674b-4cae-8afe-5681bca6fb2e",
            "name": "Read Video1",
            "type": "n8n-nodes-base.readBinaryFile",
            "typeVersion": 1,
            "position": [
                1552,
                304
            ]
        },
        {
            "parameters": {
                "command": "ffmpeg -i /data/input/interview.mp4 /data/frames/frame_%04d.png"
            },
            "id": "8e9bc0e8-5d05-49c7-abb9-29be33f6b51a",
            "name": "Extract Frames1",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                1808,
                304
            ]
        },
        {
            "parameters": {
                "batchSize": 1,
                "options": {}
            },
            "id": "182f8176-8fc6-43d0-b60b-9824114f003a",
            "name": "Split Frames1",
            "type": "n8n-nodes-base.splitInBatches",
            "typeVersion": 1,
            "position": [
                2064,
                304
            ]
        },
        {
            "parameters": {
                "command": "ffmpeg -framerate 30 -i /data/frames_swapped/frame_%04d.png -i /data/input/interview.mp4 -c:v libx264 -pix_fmt yuv420p -map 0:v -map 1:a /data/output/final_babyface.mp4"
            },
            "id": "65085adc-6c61-48a2-b35e-6bd650dcc025",
            "name": "Rebuild Video1",
            "type": "n8n-nodes-base.executeCommand",
            "typeVersion": 1,
            "position": [
                2816,
                304
            ]
        },
        {
            "parameters": {
                "options": {}
            },
            "id": "c3b27747-f735-40c6-8a6c-649ab278d633",
            "name": "Return File1",
            "type": "n8n-nodes-base.moveBinaryData",
            "typeVersion": 1,
            "position": [
                3056,
                304
            ]
        }
    ],
    "connections": {
        "Read Video": {
            "main": [
                [
                    {
                        "node": "Extract Frames",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Extract Frames": {
            "main": [
                [
                    {
                        "node": "Split Frames",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Split Frames": {
            "main": [
                [
                    {
                        "node": "AWS Rekognition IndexFaces",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "AWS Rekognition IndexFaces": {
            "main": [
                [
                    {
                        "node": "Aggregate Face IDs",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Aggregate Face IDs": {
            "main": [
                [
                    {
                        "node": "Generate Baby Face",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Generate Baby Face": {
            "main": [
                [
                    {
                        "node": "Apply Face Swap",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Apply Face Swap": {
            "main": [
                [
                    {
                        "node": "Rebuild Video",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Rebuild Video": {
            "main": [
                [
                    {
                        "node": "Return File",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "AWS SearchFacesByImage": {
            "main": [
                [
                    {
                        "node": "Apply Face Swap Memory",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Apply Face Swap Memory": {
            "main": [
                [
                    {
                        "node": "Rebuild Video1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Read Video1": {
            "main": [
                [
                    {
                        "node": "Extract Frames1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Extract Frames1": {
            "main": [
                [
                    {
                        "node": "Split Frames1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Split Frames1": {
            "main": [
                [
                    {
                        "node": "AWS SearchFacesByImage",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Rebuild Video1": {
            "main": [
                [
                    {
                        "node": "Return File1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "settings": {
        "executionOrder": "v1"
    },
    "staticData": null,
    "meta": {
        "templateCredsSetupCompleted": true
    },
    "pinData": {},
    "versionId": "59c02c27-0275-432e-bbe3-d6ca6b2acab0",
    "triggerCount": 0,
    "shared": [
        {
            "createdAt": "2025-06-24T23:53:55.355Z",
            "updatedAt": "2025-06-24T23:53:55.355Z",
            "role": "workflow:owner",
            "workflowId": "cBpT07OPrRHZfQ7z",
            "projectId": "lnYpJLFYV8VS8Mcd"
        }
    ],
    "tags": []
}